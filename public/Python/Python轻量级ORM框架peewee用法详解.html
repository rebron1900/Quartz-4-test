<!DOCTYPE html>
<html><head><title>Pythonè½»é‡çº§ORMæ¡†æ¶peeweeç”¨æ³•è¯¦è§£</title><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="Pythonè½»é‡çº§ORMæ¡†æ¶peeweeç”¨æ³•è¯¦è§£"/><meta property="og:description" content="æœ¬æ–‡ä¸­ä»£ç æ ·ä¾‹æ‰€ä½¿ç”¨çš„ Person æ¨¡å‹å¦‚ä¸‹ï¼š class Person(Model): Name = CharField() Age = IntegerField() Birthday = DateTimeField() Remarks = CharField(null=True) ä¸€ã€æ–°å¢ Â§ 1ã€create Â§ Model."/><meta property="og:image" content="https://four.quartz.jzhao.xyz/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../../static/icon.png"/><meta name="description" content="æœ¬æ–‡ä¸­ä»£ç æ ·ä¾‹æ‰€ä½¿ç”¨çš„ Person æ¨¡å‹å¦‚ä¸‹ï¼š class Person(Model): Name = CharField() Age = IntegerField() Birthday = DateTimeField() Remarks = CharField(null=True) ä¸€ã€æ–°å¢ Â§ 1ã€create Â§ Model."/><meta name="generator" content="Quartz"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link href="../../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap" rel="stylesheet" type="text/css" spa-preserve/><script src="../../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch(`../../static/contentIndex.json`).then(data => data.json())</script></head><body data-slug="Python/Pythonè½»é‡çº§ORMæ¡†æ¶peeweeç”¨æ³•è¯¦è§£"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h1 class="page-title"><a href="../..">ğŸª´ Quartz 4.0</a></h1><div class="spacer mobile-only"></div><div class="search"><div id="search-icon"><p>Search</p><div></div><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search</title><desc id="desc">Search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></div><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="results-container"></div></div></div></div><div class="darkmode"><input class="toggle" id="darkmode-toggle" type="checkbox" tabindex="-1"/><label id="toggle-label-light" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35;" xml:space="preserve"><title>Light mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg></label><label id="toggle-label-dark" for="darkmode-toggle" tabindex="-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'" xml:space="preserve"><title>Dark mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></label></div><div class="desktop-only"><button type="button" id="toc"><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content"><ul class="overflow"><li class="depth-0"><a href="#ä¸€æ–°å¢" data-for="ä¸€æ–°å¢">ä¸€ã€æ–°å¢</a></li><li class="depth-0"><a href="#äºŒåˆ é™¤" data-for="äºŒåˆ é™¤">äºŒã€åˆ é™¤</a></li><li class="depth-0"><a href="#ä¸‰ä¿®æ”¹" data-for="ä¸‰ä¿®æ”¹">ä¸‰ã€ä¿®æ”¹</a></li><li class="depth-0"><a href="#å››æŸ¥è¯¢" data-for="å››æŸ¥è¯¢">å››ã€æŸ¥è¯¢</a></li><li class="depth-0"><a href="#äº”æŸ¥è¯¢æ¡ä»¶" data-for="äº”æŸ¥è¯¢æ¡ä»¶">äº”ã€æŸ¥è¯¢æ¡ä»¶</a></li><li class="depth-0"><a href="#å…­æ”¯æŒçš„æ¯”è¾ƒç¬¦" data-for="å…­æ”¯æŒçš„æ¯”è¾ƒç¬¦">å…­ã€æ”¯æŒçš„æ¯”è¾ƒç¬¦</a></li></ul></div></div></div><div class="center"><div class="page-header"><div class="popover-hint"><h1 class="article-title">Pythonè½»é‡çº§ORMæ¡†æ¶peeweeç”¨æ³•è¯¦è§£</h1><p class="content-meta">Aug 08, 2023, 15 min read</p><ul class="tags"><li><a href="../../tags/python" class="internal tag-link">#python</a></li></ul></div></div><article class="popover-hint"><p>æœ¬æ–‡ä¸­ä»£ç æ ·ä¾‹æ‰€ä½¿ç”¨çš„ <em>Person</em> æ¨¡å‹å¦‚ä¸‹ï¼š</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">class</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Person</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-function);">Model</span><span style="color:var(--shiki-color-text);">):    </span><span style="color:var(--shiki-token-function);">Name</span><span style="color:var(--shiki-color-text);"> = </span><span style="color:var(--shiki-token-function);">CharField</span><span style="color:var(--shiki-color-text);">()    </span><span style="color:var(--shiki-token-function);">Age</span><span style="color:var(--shiki-color-text);"> = </span><span style="color:var(--shiki-token-function);">IntegerField</span><span style="color:var(--shiki-color-text);">()    </span><span style="color:var(--shiki-token-function);">Birthday</span><span style="color:var(--shiki-color-text);"> = </span><span style="color:var(--shiki-token-function);">DateTimeField</span><span style="color:var(--shiki-color-text);">()    </span><span style="color:var(--shiki-token-function);">Remarks</span><span style="color:var(--shiki-color-text);"> = </span><span style="color:var(--shiki-token-function);">CharField</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-function);">null</span><span style="color:var(--shiki-color-text);">=</span><span style="color:var(--shiki-token-function);">True</span><span style="color:var(--shiki-color-text);">)</span></span></code></pre></div>
<h3 id="ä¸€æ–°å¢"><strong>ä¸€ã€æ–°å¢</strong><a aria-hidden="true" tabindex="-1" href="#ä¸€æ–°å¢" class="internal"> Â§</a></h3>
<h4 id="1create"><strong>1ã€create</strong><a aria-hidden="true" tabindex="-1" href="#1create" class="internal"> Â§</a></h4>
<p><code>Model.create</code> å‘<a href="https://cloud.tencent.com/solution/database?from=10680" class="external">æ•°æ®åº“</a>ä¸­æ’å…¥ä¸€æ¡è®°å½•ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">p </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.create</span><span style="color:var(--shiki-color-text);">(Name</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">'å¼ ä¸‰'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> Age</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-constant);">30</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> Birthday</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1990</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">))</span></span></code></pre></div>
<h4 id="2save"><strong>2ã€save</strong><a aria-hidden="true" tabindex="-1" href="#2save" class="internal"> Â§</a></h4>
<p><strong>è¯­æ³•ï¼š</strong></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-function);">save</span><span style="color:var(--shiki-color-text);">(force_insert</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);">False</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> only</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);">None)</span></span></code></pre></div>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li>force_insertï¼šæ˜¯å¦å¼ºåˆ¶æ’å…¥</li>
<li>only(list)ï¼šéœ€è¦æŒä¹…åŒ–çš„å­—æ®µï¼Œå½“æä¾›æ­¤å‚æ•°æ—¶ï¼Œåªæœ‰æä¾›çš„å­—æ®µè¢«æŒä¹…åŒ–ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">p1 </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Person</span><span style="color:var(--shiki-color-text);">(Name</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">'ç‹äº”'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> Age</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-constant);">50</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> Birthday</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1970</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">))</span><span style="color:var(--shiki-token-constant);">p1</span><span style="color:var(--shiki-token-function);">.save</span><span style="color:var(--shiki-color-text);">()</span></span></code></pre></div>
<p>è¿™é‡Œè¯´çš„æ¯”è¾ƒç®€å•ï¼Œä¸‹é¢ä¼šè¯¦ç»†è¯´æ˜ã€‚</p>
<h4 id="3insert"><strong>3ã€insert</strong><a aria-hidden="true" tabindex="-1" href="#3insert" class="internal"> Â§</a></h4>
<p><code>insert</code> åªæ’å…¥æ•°æ®è€Œä¸åˆ›å»ºæ¨¡å‹å®ä¾‹ï¼Œè¿”å›æ–°è¡Œçš„ä¸»é”®ã€‚</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.insert</span><span style="color:var(--shiki-color-text);">(Name</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">'æå››'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> Age</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-constant);">40</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> Birthday</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1980</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">))</span><span style="color:var(--shiki-token-function);">.execute</span><span style="color:var(--shiki-color-text);">()</span></span></code></pre></div>
<h4 id="4insert_many"><strong>4ã€insert_many</strong><a aria-hidden="true" tabindex="-1" href="#4insert_many" class="internal"> Â§</a></h4>
<p><strong>è¯­æ³•ï¼š</strong></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-function);">insert_many</span><span style="color:var(--shiki-color-text);">(rows</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> fields</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);">None)</span></span></code></pre></div>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li>rowsï¼šå…ƒç»„æˆ–å­—å…¸åˆ—è¡¨ï¼Œè¦æ’å…¥çš„æ•°æ®</li>
<li>fields(list)ï¼šéœ€è¦æ’å…¥çš„å­—æ®µååˆ—è¡¨ã€‚</li>
</ul>
<blockquote>
<p>è¯´æ˜ï¼š 1ã€å½“ rows ä¼ é€’çš„æ˜¯å­—å…¸åˆ—è¡¨æ—¶ï¼Œfields æ˜¯ä¸éœ€è¦ä¼ çš„ï¼Œå¦‚æœä¼ äº†ï¼Œé‚£ä¹ˆï¼Œrows ä¸­çš„å­—æ®µåœ¨å­—å…¸ä¸­å¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™æŠ¥é”™ã€‚å¦‚æœæ²¡æœ‰ä¼ é€’ fields å‚æ•°ï¼Œé‚£ä¹ˆé»˜è®¤å–æ‰€æœ‰å­—å…¸çš„äº¤é›†ä½œä¸ºæ’å…¥å­—æ®µã€‚è¿™ä¸ªä¹Ÿå¥½ç†è§£ï¼Œæ¯”å¦‚ä¸€ä¸ªå­—å…¸çš„é”®æ˜¯</p>
</blockquote>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.insert_many</span><span style="color:var(--shiki-color-text);">([    (</span><span style="color:var(--shiki-token-string-expression);">'å¼ ä¸‰'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">30</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1990</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">))</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);">    (</span><span style="color:var(--shiki-token-string-expression);">'æå››'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">40</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1980</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">))</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);">    (</span><span style="color:var(--shiki-token-string-expression);">'ç‹äº”'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">50</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1970</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">))]</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);">    [</span><span style="color:var(--shiki-token-string-expression);">'Name'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Age'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Birthday'</span><span style="color:var(--shiki-color-text);">])</span><span style="color:var(--shiki-token-function);">.execute</span><span style="color:var(--shiki-color-text);">()</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.insert_many</span><span style="color:var(--shiki-color-text);">([    {</span><span style="color:var(--shiki-token-string-expression);">'Name'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'å¼ ä¸‰'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Age'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">30</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Birthday'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1990</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)}</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);">    {</span><span style="color:var(--shiki-token-string-expression);">'Name'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'æå››'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Age'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">40</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Birthday'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1980</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)}</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);">    {</span><span style="color:var(--shiki-token-string-expression);">'Name'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'ç‹äº”'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Age'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">50</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Birthday'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1970</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)}])</span><span style="color:var(--shiki-token-function);">.execute</span><span style="color:var(--shiki-color-text);">()</span></span></code></pre></div>
<p>å¯¹äºæ‰¹é‡æ“ä½œï¼Œåº”è¯¥æ”¾åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œï¼š</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">with</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">db</span><span style="color:var(--shiki-token-function);">.atomic</span><span style="color:var(--shiki-color-text);">():    </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.insert_many</span><span style="color:var(--shiki-color-text);">(data</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> fields</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);">fields)</span><span style="color:var(--shiki-token-function);">.execute</span><span style="color:var(--shiki-color-text);">()</span></span></code></pre></div>
<blockquote>
<p>åœ¨ä½¿ç”¨æ‰¹é‡æ’å…¥æ—¶ï¼Œå¦‚æœæ˜¯ SQLiteï¼ŒSQLite3 ç‰ˆæœ¬å¿…é¡»ä¸º 3.7.11.0 æˆ–æ›´é«˜ç‰ˆæœ¬æ‰èƒ½åˆ©ç”¨æ‰¹é‡æ’å…¥APIã€‚æ­¤å¤–ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒSQLite å°† SQL æŸ¥è¯¢ä¸­çš„ç»‘å®šå˜é‡æ•°é™åˆ¶ä¸º 999ã€‚</p>
</blockquote>
<p>SQLite ä¸­ï¼Œå½“æ‰¹é‡æ’å…¥çš„è¡Œæ•°è¶…è¿‡ 999 æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨å¾ªç¯æ¥å°†æ•°æ®æ‰¹é‡åˆ†ç»„ï¼š</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">with</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">db</span><span style="color:var(--shiki-token-function);">.atomic</span><span style="color:var(--shiki-color-text);">():    for idx </span><span style="color:var(--shiki-token-keyword);">in</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">range</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">len</span><span style="color:var(--shiki-color-text);">(data)</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">100</span><span style="color:var(--shiki-color-text);">):        </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.insert_many</span><span style="color:var(--shiki-color-text);">(data[idx: idx</span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-token-constant);">100</span><span style="color:var(--shiki-color-text);">]</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> fields</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);">fields)</span><span style="color:var(--shiki-token-function);">.execute</span><span style="color:var(--shiki-color-text);">()</span></span></code></pre></div>
<p><em>Peewee</em> ä¸­å¸¦æœ‰ä¸€ä¸ªåˆ†å—è¾…åŠ©å‡½æ•° <code>chunked()</code>ï¼Œä½¿ç”¨å®ƒå¯ä»¥æœ‰æ•ˆåœ°å°†é€šç”¨è¿­ä»£å—åˆ†å—ä¸ºä¸€ç³»åˆ—æ‰¹é‡è¿­ä»£çš„è¿­ä»£ï¼š</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">from peewee </span><span style="color:var(--shiki-token-keyword);">import</span><span style="color:var(--shiki-color-text);"> chunked# ä¸€æ¬¡æ’å…¥ 100 è¡Œ.with db.atomic():    for batch in chunked(data</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> 100):        Person.insert_many(batch).execute()</span></span></code></pre></div>
<h4 id="5bulk_create"><strong>5ã€bulk_create</strong><a aria-hidden="true" tabindex="-1" href="#5bulk_create" class="internal"> Â§</a></h4>
<p><strong>è¯­æ³•ï¼š</strong></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-function);">bulk_create</span><span style="color:var(--shiki-color-text);">(model_list</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> batch_size</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);">None)</span></span></code></pre></div>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li>model_list (iterable)ï¼šæœªä¿å­˜çš„æ¨¡å‹å®ä¾‹çš„åˆ—è¡¨æˆ–å…¶ä»–å¯è¿­ä»£å¯¹è±¡ã€‚</li>
<li>batch_size (int)ï¼šæ¯æ¬¡æ‰¹é‡æ’å…¥çš„è¡Œæ•°ã€‚å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä¸€æ¬¡æ€§å…¨éƒ¨æ’å…¥ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong> ç®€å•æ¥è¯´ï¼Œ<code>insert_many</code> ä½¿ç”¨å­—å…¸æˆ–å…ƒç»„åˆ—è¡¨ä½œä¸ºå‚æ•°ï¼Œè€Œ <code>model_list</code> ä½¿ç”¨æ¨¡å‹å®ä¾‹åˆ—è¡¨ä½œä¸ºå‚æ•°ï¼Œå°±è¿™åŒºåˆ«ã€‚</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">data </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-function);">Person</span><span style="color:var(--shiki-color-text);">(Name</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">'å¼ ä¸‰~'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> Age</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-constant);">30</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> Birthday</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1990</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">))</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);">        </span><span style="color:var(--shiki-token-function);">Person</span><span style="color:var(--shiki-color-text);">(Name</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">'æå››~'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> Age</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-constant);">40</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> Birthday</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1980</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">))]</span><span style="color:var(--shiki-token-keyword);">with</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">db</span><span style="color:var(--shiki-token-function);">.atomic</span><span style="color:var(--shiki-color-text);">():    </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.bulk_create</span><span style="color:var(--shiki-color-text);">(data)</span></span></code></pre></div>
<blockquote>
<p>**æ³¨æ„ï¼š**å¦‚æœä½¿ç”¨çš„æ˜¯ Postgresqlï¼ˆæ”¯æŒè¯¥RETURNINGå­å¥ï¼‰ï¼Œåˆ™å…ˆå‰æœªä¿å­˜çš„æ¨¡å‹å®ä¾‹å°†è‡ªåŠ¨å¡«å……å…¶æ–°çš„ä¸»é”®å€¼ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ç”¨çš„æ˜¯ SQLiteï¼Œæ‰§è¡Œä¸Šè¿°ä»£ç ä¹‹åï¼Œ<code>print(data[0].id)</code> æ˜¾ç¤ºçš„ç»“æœæ˜¯ <code>None</code>ã€‚</p>
<h4 id="6batch_commit"><strong>6ã€batch_commit</strong><a aria-hidden="true" tabindex="-1" href="#6batch_commit" class="internal"> Â§</a></h4>
<p>è¿™ä¸æ˜¯ä¸€ä¸ªå¥½çš„æ–¹æ³•ï¼Œæ¥çœ‹ä¸‹é¢çš„ä¾‹å­</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">data_dict </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> [{</span><span style="color:var(--shiki-token-string-expression);">'Name'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'å¼ ä¸‰'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Age'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">30</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Birthday'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1990</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)}</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);">             {</span><span style="color:var(--shiki-token-string-expression);">'Name'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'æå››'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Age'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">40</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Birthday'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1980</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)}</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);">             {</span><span style="color:var(--shiki-token-string-expression);">'Name'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'ç‹äº”'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Age'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">50</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Birthday'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1970</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)}]for row </span><span style="color:var(--shiki-token-keyword);">in</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">db</span><span style="color:var(--shiki-token-function);">.batch_commit</span><span style="color:var(--shiki-color-text);">(data_dict</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">100</span><span style="color:var(--shiki-color-text);">):    p </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.create</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">**</span><span style="color:var(--shiki-color-text);">row)</span></span></code></pre></div>
<p>æŸ¥çœ‹ SQL è¯­å¥å¦‚ä¸‹ï¼š</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'BEGIN'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> None)(</span><span style="color:var(--shiki-token-string-expression);">'INSERT INTO &quot;person&quot; (&quot;Name&quot;, &quot;Age&quot;, &quot;Birthday&quot;) VALUES (?, ?, ?)'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-string-expression);">'å¼ ä¸‰'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">30</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">datetime</span><span style="color:var(--shiki-token-function);">.date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1990</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)])(</span><span style="color:var(--shiki-token-string-expression);">'INSERT INTO &quot;person&quot; (&quot;Name&quot;, &quot;Age&quot;, &quot;Birthday&quot;) VALUES (?, ?, ?)'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-string-expression);">'æå››'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">40</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">datetime</span><span style="color:var(--shiki-token-function);">.date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1980</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)])(</span><span style="color:var(--shiki-token-string-expression);">'INSERT INTO &quot;person&quot; (&quot;Name&quot;, &quot;Age&quot;, &quot;Birthday&quot;) VALUES (?, ?, ?)'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-string-expression);">'ç‹äº”'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">50</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">datetime</span><span style="color:var(--shiki-token-function);">.date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1970</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)])</span></span></code></pre></div>
<p>å…¶å®ï¼Œ<code>batch_commit</code> å°±æ˜¯è‡ªåŠ¨æ·»åŠ äº†ä¸€ä¸ªäº‹åŠ¡ï¼Œç„¶åä¸€æ¡æ¡çš„æ’å…¥ï¼Œæ‰€ä»¥è¿”å›çš„æ¨¡å‹å®ä¾‹ä¸­èƒ½è·å–åˆ°ä¸»é”®ã€‚ å‚æ•°ç¬¬ä¸€ä¸ªæ˜¯å­—å…¸åˆ—è¡¨ï¼Œç¬¬äºŒä¸ªå°±æ˜¯æ¯å¤šå°‘æ¡å¯ç”¨ä¸€ä¸ªäº‹åŠ¡ï¼Œå¤§å®¶å¯ä»¥æŠŠå®ƒæ”¹æˆ 1 çœ‹ä¸‹ SQL è¯­å¥å°±æ˜ç™½äº†ã€‚</p>
<h4 id="7insert_from"><strong>7ã€insert_from</strong><a aria-hidden="true" tabindex="-1" href="#7insert_from" class="internal"> Â§</a></h4>
<p>ä½¿ç”¨ <em>SELECT</em> æŸ¥è¯¢ä½œä¸ºæº <em>INSERT</em> æ•°æ®ã€‚æ­¤ API åº”ç”¨äº <em>INSERT INTO â€¦ SELECT FROM â€¦</em> å½¢å¼çš„æŸ¥è¯¢ã€‚</p>
<p><strong>è¯­æ³•ï¼š</strong></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-function);">insert_from</span><span style="color:var(--shiki-color-text);">(query</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> fields)</span></span></code></pre></div>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li>queryï¼šSELECTæŸ¥è¯¢ç”¨ä½œæ•°æ®æº</li>
<li>fieldsï¼šè¦å°†æ•°æ®æ’å…¥çš„å­—æ®µï¼Œæ­¤å‚æ•°å¿…é¡»è¦çš„ **ç¤ºä¾‹ï¼š**æˆ‘ä»¬å°† Person è¡¨æŒ‰åŸç»“æ„å¤åˆ¶ä¸€ä¸ª Person2 è¡¨å‡ºæ¥ï¼Œä»¥åšæ¼”ç¤ºã€‚</li>
</ul>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">data </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.select</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Name</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Age</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Birthday)</span><span style="color:var(--shiki-token-constant);">Person2</span><span style="color:var(--shiki-token-function);">.insert_from</span><span style="color:var(--shiki-color-text);">(data</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-string-expression);">'Name'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Age'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Birthday'</span><span style="color:var(--shiki-color-text);">])</span><span style="color:var(--shiki-token-function);">.execute</span><span style="color:var(--shiki-color-text);">()</span></span></code></pre></div>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> å› ä¸ºæ˜¯ <em>INSERT INTO â€¦ SELECT FROM â€¦</em> å½¢å¼çš„ï¼Œæ‰€ä»¥æ•°æ®æºçš„åˆ—è·Ÿè¦æ’å…¥çš„åˆ—å¿…é¡»ä¿æŒä¸€è‡´ã€‚</p>
</blockquote>
<h3 id="äºŒåˆ é™¤"><strong>äºŒã€åˆ é™¤</strong><a aria-hidden="true" tabindex="-1" href="#äºŒåˆ é™¤" class="internal"> Â§</a></h3>
<h4 id="1delete"><strong>1ã€delete</strong><a aria-hidden="true" tabindex="-1" href="#1delete" class="internal"> Â§</a></h4>
<p><code>delete</code> ååŠ  <code>where</code> åˆ é™¤æŒ‡å®šè®°å½•ï¼Œå¦‚æœä¸åŠ  <code>where</code>ï¼Œåˆ™åˆ é™¤å…¨éƒ¨è®°å½•ã€‚</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.delete</span><span style="color:var(--shiki-color-text);">()</span><span style="color:var(--shiki-token-function);">.where</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Name</span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-token-string-expression);">'ç‹äº”'</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-function);">.execute</span><span style="color:var(--shiki-color-text);">()</span></span></code></pre></div>
<h4 id="2delete_instance"><strong>2ã€delete_instance</strong><a aria-hidden="true" tabindex="-1" href="#2delete_instance" class="internal"> Â§</a></h4>
<p>åˆ é™¤ç»™å®šçš„å®ä¾‹ã€‚ <strong>è¯­æ³•ï¼š</strong></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-function);">delete_instance</span><span style="color:var(--shiki-color-text);">(recursive</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);">False</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> delete_nullable</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);">False)</span></span></code></pre></div>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">p </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Name</span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-token-string-expression);">'å¼ ä¸‰'</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-constant);">p</span><span style="color:var(--shiki-token-function);">.delete_instance</span><span style="color:var(--shiki-color-text);">()</span></span></code></pre></div>
<p><code>delete_instance</code> ç›´æ¥æ‰§è¡Œåˆ é™¤äº†ï¼Œä¸ç”¨è°ƒç”¨<code>execute()</code> æ–¹æ³•ã€‚</p>
<p><strong>å‚æ•°ï¼š</strong> ä¸€èˆ¬æˆ‘éƒ½æ˜¯å…ˆè®²å‚æ•°å†è®²ç¤ºä¾‹çš„ï¼Œè¿™æ¬¡å€’è¿‡æ¥ï¼Œç¤ºä¾‹å…¶å®å¾ˆç®€å•ï¼Œä¸€çœ‹å°±æ˜ç™½ã€‚ä½†æ˜¯è¿™ä¸ªå‚æ•°ç¼ºéœ€è¦å¥½å¥½è®²ä¸‹ã€‚</p>
<p>è¿™ä¸¤ä¸ªå‚æ•°éƒ½è·Ÿå¤–é”®æœ‰å…³ã€‚æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹æµ‹è¯•ç”¨çš„æ¨¡å‹ã€‚å‡è®¾æœ‰è¿™æ ·ä¸¤ä¸ªæ¨¡å‹ï¼Œä¸€ä¸ªäººå‘˜ï¼Œä¸€ä¸ªéƒ¨é—¨ï¼Œäººå‘˜å±äºéƒ¨é—¨ã€‚</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-keyword);">class</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Department</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-function);">Model</span><span style="color:var(--shiki-color-text);">):    </span><span style="color:var(--shiki-token-function);">Name</span><span style="color:var(--shiki-color-text);"> = </span><span style="color:var(--shiki-token-function);">CharField</span><span style="color:var(--shiki-color-text);">()    </span><span style="color:var(--shiki-token-function);">class</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Meta</span><span style="color:var(--shiki-color-text);">:        </span><span style="color:var(--shiki-token-function);">database</span><span style="color:var(--shiki-color-text);"> = </span><span style="color:var(--shiki-token-function);">dbclass</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Person</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-function);">Model</span><span style="color:var(--shiki-color-text);">):    </span><span style="color:var(--shiki-token-function);">Name</span><span style="color:var(--shiki-color-text);"> = </span><span style="color:var(--shiki-token-function);">CharField</span><span style="color:var(--shiki-color-text);">()    </span><span style="color:var(--shiki-token-function);">Age</span><span style="color:var(--shiki-color-text);"> = </span><span style="color:var(--shiki-token-function);">IntegerField</span><span style="color:var(--shiki-color-text);">()    </span><span style="color:var(--shiki-token-function);">Birthday</span><span style="color:var(--shiki-color-text);"> = </span><span style="color:var(--shiki-token-function);">DateTimeField</span><span style="color:var(--shiki-color-text);">()    </span><span style="color:var(--shiki-token-function);">Remarks</span><span style="color:var(--shiki-color-text);"> = </span><span style="color:var(--shiki-token-function);">CharField</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-function);">null</span><span style="color:var(--shiki-color-text);">=</span><span style="color:var(--shiki-token-function);">True</span><span style="color:var(--shiki-color-text);">)    </span><span style="color:var(--shiki-token-function);">Department</span><span style="color:var(--shiki-color-text);"> = </span><span style="color:var(--shiki-token-function);">ForeignKeyField</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-function);">Department</span><span style="color:var(--shiki-color-text);">, </span><span style="color:var(--shiki-token-function);">null</span><span style="color:var(--shiki-color-text);">=</span><span style="color:var(--shiki-token-function);">True</span><span style="color:var(--shiki-color-text);">) # </span><span style="color:var(--shiki-token-function);">è¿™é‡Œå¤–é”®å¯ä¸ºç©ºå’Œä¸å¯ä¸ºç©ºæ˜¯ä¸ä¸€æ ·çš„</span><span style="color:var(--shiki-color-text);">ï¼Œ</span><span style="color:var(--shiki-token-function);">ä¸‹é¢è¯´æ˜</span><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-function);">class</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Meta</span><span style="color:var(--shiki-color-text);">:        </span><span style="color:var(--shiki-token-function);">database</span><span style="color:var(--shiki-color-text);"> = </span><span style="color:var(--shiki-token-function);">db</span></span></code></pre></div>
<p>â‘  å½“ <code>recursive=False</code> æ—¶ï¼Œåªåˆ é™¤äº†ã€éƒ¨é—¨ã€‘ï¼Œã€äººå‘˜ã€‘æ²¡æœ‰å½±å“ï¼Œä» SQL è¯­å¥ä¸­å¯ä»¥çœ‹å‡ºã€‚</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">d </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Department</span><span style="color:var(--shiki-token-function);">.get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-constant);">d</span><span style="color:var(--shiki-token-function);">.delete_instance</span><span style="color:var(--shiki-color-text);">(recursive</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);">False)# æ‰§è¡Œçš„ </span><span style="color:var(--shiki-token-constant);">SQL</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">è¯­å¥</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'SELECT &quot;t1&quot;.&quot;id&quot;, &quot;t1&quot;.&quot;Name&quot; FROM &quot;department&quot; AS &quot;t1&quot; WHERE ? LIMIT ? OFFSET ?'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">])(</span><span style="color:var(--shiki-token-string-expression);">'DELETE FROM &quot;department&quot; WHERE (&quot;department&quot;.&quot;id&quot; = ?)'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">])</span></span></code></pre></div>
<p>â‘¡ å½“ <code>recursive=True</code> ï¼Œå¹¶ä¸”å¤–é”®<strong>ä¸å¯ä¸ºç©º</strong>æ—¶ï¼Œä¼šå…ˆåˆ é™¤ã€éƒ¨é—¨ã€‘ä¸‹çš„ã€äººå‘˜ã€‘ï¼Œå†åˆ é™¤ã€éƒ¨é—¨ã€‘ã€‚</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">d </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Department</span><span style="color:var(--shiki-token-function);">.get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-constant);">d</span><span style="color:var(--shiki-token-function);">.delete_instance</span><span style="color:var(--shiki-color-text);">(recursive</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);">True)# æ‰§è¡Œçš„ </span><span style="color:var(--shiki-token-constant);">SQL</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">è¯­å¥</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'SELECT &quot;t1&quot;.&quot;id&quot;, &quot;t1&quot;.&quot;Name&quot; FROM &quot;department&quot; AS &quot;t1&quot; WHERE ? LIMIT ? OFFSET ?'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">])(</span><span style="color:var(--shiki-token-string-expression);">'DELETE FROM &quot;person&quot; WHERE (&quot;person&quot;.&quot;Department_id&quot; = ?)'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">])(</span><span style="color:var(--shiki-token-string-expression);">'DELETE FROM &quot;department&quot; WHERE (&quot;department&quot;.&quot;id&quot; = ?)'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">])</span></span></code></pre></div>
<p>â‘¢ å½“ <code>recursive=True</code> ï¼Œå¹¶ä¸”å¤–é”®<strong>å¯ä¸ºç©º</strong>æ—¶ï¼Œå…ˆå°†ã€äººå‘˜ã€‘çš„ã€éƒ¨é—¨IDï¼ˆå¤–é”®å­—æ®µï¼‰ã€‘ç½®ä¸ºäº† <em>NULL</em>ï¼Œå†åˆ é™¤ã€éƒ¨é—¨ã€‘ã€‚</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">d </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Department</span><span style="color:var(--shiki-token-function);">.get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-constant);">d</span><span style="color:var(--shiki-token-function);">.delete_instance</span><span style="color:var(--shiki-color-text);">(recursive</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);">True)# æ‰§è¡Œçš„ </span><span style="color:var(--shiki-token-constant);">SQL</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">è¯­å¥</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'SELECT &quot;t1&quot;.&quot;id&quot;, &quot;t1&quot;.&quot;Name&quot; FROM &quot;department&quot; AS &quot;t1&quot; WHERE ? LIMIT ? OFFSET ?'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">])(</span><span style="color:var(--shiki-token-string-expression);">'UPDATE &quot;person&quot; SET &quot;Department_id&quot; = ? WHERE (&quot;person&quot;.&quot;Department_id&quot; = ?)'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [None</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">])(</span><span style="color:var(--shiki-token-string-expression);">'DELETE FROM &quot;department&quot; WHERE (&quot;department&quot;.&quot;id&quot; = ?)'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">])</span></span></code></pre></div>
<p>â‘£ <code>delete_nullable</code> ä»…åœ¨ <code>recursive=True</code> ä¸”å¤–é”®<strong>å¯ä¸ºç©º</strong>æ—¶æœ‰æ•ˆï¼Œå’Œ â‘¢ ä¸€æ ·ï¼Œå½“ <code>delete_nullable=True</code> æ—¶ï¼Œä¼šåˆ é™¤ã€äººå‘˜ã€‘ï¼Œè€Œä¸æ˜¯å°†ã€äººå‘˜çš„éƒ¨é—¨IDã€‘ç½®ä¸º <em>NULL</em>ã€‚</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">d </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Department</span><span style="color:var(--shiki-token-function);">.get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-constant);">d</span><span style="color:var(--shiki-token-function);">.delete_instance</span><span style="color:var(--shiki-color-text);">(recursive</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);">True</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> delete_nullable</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);">True)# æ‰§è¡Œçš„ </span><span style="color:var(--shiki-token-constant);">SQL</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">è¯­å¥</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'SELECT &quot;t1&quot;.&quot;id&quot;, &quot;t1&quot;.&quot;Name&quot; FROM &quot;department&quot; AS &quot;t1&quot; WHERE ? LIMIT ? OFFSET ?'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">])(</span><span style="color:var(--shiki-token-string-expression);">'DELETE FROM &quot;person&quot; WHERE (&quot;person&quot;.&quot;Department_id&quot; = ?)'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">])(</span><span style="color:var(--shiki-token-string-expression);">'DELETE FROM &quot;department&quot; WHERE (&quot;department&quot;.&quot;id&quot; = ?)'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">])</span></span></code></pre></div>
<h3 id="ä¸‰ä¿®æ”¹"><strong>ä¸‰ã€ä¿®æ”¹</strong><a aria-hidden="true" tabindex="-1" href="#ä¸‰ä¿®æ”¹" class="internal"> Â§</a></h3>
<h4 id="1save"><strong>1ã€save</strong><a aria-hidden="true" tabindex="-1" href="#1save" class="internal"> Â§</a></h4>
<p>ä¹‹å‰è¯´è¿‡ï¼Œ<code>save()</code> æ–¹æ³•å¯ä»¥æ’å…¥ä¸€æ¡è®°å½•ï¼Œä¸€æ—¦æ¨¡å‹å®ä¾‹å…·æœ‰ä¸»é”®ï¼Œä»»ä½•åç»­è°ƒç”¨ <code>save()</code> éƒ½å°†å¯¼è‡´ <em>UPDATE</em> è€Œä¸æ˜¯å¦ä¸€ä¸ª <em>INSERT</em>ã€‚æ¨¡å‹çš„ä¸»é”®ä¸ä¼šæ”¹å˜ã€‚</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">p </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">Person</span><span style="color:var(--shiki-color-text);">(Name</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">'ç‹äº”'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> Age</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-constant);">50</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> Birthday</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1970</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">))</span><span style="color:var(--shiki-token-constant);">p</span><span style="color:var(--shiki-token-function);">.save</span><span style="color:var(--shiki-color-text);">()</span><span style="color:var(--shiki-token-function);">print</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">p1</span><span style="color:var(--shiki-color-text);">.id)</span><span style="color:var(--shiki-token-constant);">p</span><span style="color:var(--shiki-color-text);">.Remarks </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'abc'</span><span style="color:var(--shiki-token-constant);">p</span><span style="color:var(--shiki-token-function);">.save</span><span style="color:var(--shiki-color-text);">()</span></span></code></pre></div>
<p>è¿™ä¸ªä¾‹å­ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œçš„ <code>save</code> æ˜¯ <em>INSERT</em>ï¼Œç¬¬äºŒæ¬¡æ˜¯ <em>UPDATE</em>ã€‚</p>
<blockquote>
<p>è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼Œ</p>
</blockquote>
<h4 id="2update"><strong>2ã€update</strong><a aria-hidden="true" tabindex="-1" href="#2update" class="internal"> Â§</a></h4>
<p><code>update</code> ç”¨äºæ‰¹é‡æ›´æ–°ï¼Œæ–¹æ³•ç›¸å¯¹ç®€å•ï¼Œä»¥ä¸‹ä¸‰ç§å†™æ³•éƒ½å¯ä»¥</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);"># </span><span style="color:var(--shiki-token-constant);">æ–¹æ³•ä¸€Person</span><span style="color:var(--shiki-token-function);">.update</span><span style="color:var(--shiki-color-text);">({Person.Name</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'èµµå…­'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> Person.Remarks</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'abc'</span><span style="color:var(--shiki-color-text);">})</span><span style="color:var(--shiki-token-function);">.where</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Name</span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-token-string-expression);">'ç‹äº”'</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-function);">.execute</span><span style="color:var(--shiki-color-text);">()# </span><span style="color:var(--shiki-token-constant);">æ–¹æ³•äºŒPerson</span><span style="color:var(--shiki-token-function);">.update</span><span style="color:var(--shiki-color-text);">({</span><span style="color:var(--shiki-token-string-expression);">'Name'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'èµµå…­'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Remarks'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'abc'</span><span style="color:var(--shiki-color-text);">})</span><span style="color:var(--shiki-token-function);">.where</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Name</span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-token-string-expression);">'å¼ ä¸‰'</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-function);">.execute</span><span style="color:var(--shiki-color-text);">()# </span><span style="color:var(--shiki-token-constant);">æ–¹æ³•ä¸‰Person</span><span style="color:var(--shiki-token-function);">.update</span><span style="color:var(--shiki-color-text);">(Name</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">'èµµå…­'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> Remarks</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">'abc'</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-function);">.where</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Name</span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-token-string-expression);">'æå››'</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-function);">.execute</span><span style="color:var(--shiki-color-text);">()</span></span></code></pre></div>
<h4 id="3åŸå­æ›´æ–°"><strong>3ã€åŸå­æ›´æ–°</strong><a aria-hidden="true" tabindex="-1" href="#3åŸå­æ›´æ–°" class="internal"> Â§</a></h4>
<p>çœ‹è¿™æ ·çš„ä¸€ä¸ªéœ€æ±‚ï¼Œæœ‰ä¸€å¼ è¡¨ï¼Œè®°å½•åšå®¢çš„è®¿é—®é‡ï¼Œæ¯æ¬¡æœ‰äººè®¿é—®åšå®¢çš„æ—¶å€™ï¼Œè®¿é—®é‡+1ã€‚</p>
<p>å› ä¸ºæ‡’å¾—æ–°å»ºæ¨¡å‹ï¼Œæˆ‘ä»¬å°±ä»¥ Person æ¨¡å‹çš„ Age + 1 æ¥æ¼”ç¤ºã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è¿™æ ·æ¥å†™ï¼š</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">for p </span><span style="color:var(--shiki-token-keyword);">in</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.select</span><span style="color:var(--shiki-color-text);">():    </span><span style="color:var(--shiki-token-constant);">p</span><span style="color:var(--shiki-color-text);">.Age </span><span style="color:var(--shiki-token-keyword);">+=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">    </span><span style="color:var(--shiki-token-constant);">p</span><span style="color:var(--shiki-token-function);">.save</span><span style="color:var(--shiki-color-text);">()</span></span></code></pre></div>
<p>è¿™æ ·å½“ç„¶æ˜¯å¯ä»¥å®ç°çš„ï¼Œä½†æ˜¯è¿™ä¸ä»…é€Ÿåº¦æ…¢ï¼Œè€Œä¸”å¦‚æœå¤šä¸ªè¿›ç¨‹åŒæ—¶æ›´æ–°è®¡æ•°å™¨ï¼Œå®ƒä¹Ÿå®¹æ˜“å—åˆ°ç«äº‰æ¡ä»¶çš„å½±å“ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨ <code>update</code> æ–¹æ³•æ¥å®ç°ã€‚</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.update</span><span style="color:var(--shiki-color-text);">(Age</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Age</span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)</span><span style="color:var(--shiki-token-function);">.execute</span><span style="color:var(--shiki-color-text);">()</span></span></code></pre></div>
<h3 id="å››æŸ¥è¯¢"><strong>å››ã€æŸ¥è¯¢</strong><a aria-hidden="true" tabindex="-1" href="#å››æŸ¥è¯¢" class="internal"> Â§</a></h3>
<h4 id="1get"><strong>1ã€get</strong><a aria-hidden="true" tabindex="-1" href="#1get" class="internal"> Â§</a></h4>
<p><code>Model.get()</code> æ–¹æ³•æ£€ç´¢ä¸ç»™å®šæŸ¥è¯¢åŒ¹é…çš„å•ä¸ªå®ä¾‹ã€‚ <strong>è¯­æ³•ï¼š</strong></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-function);">get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">query</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-keyword);">**</span><span style="color:var(--shiki-color-text);">filters)</span></span></code></pre></div>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li>queryï¼šæŸ¥è¯¢æ¡ä»¶</li>
<li>filtersï¼šMapping of field-name to value for Django-style filter. æˆ‘ç¿»éç½‘ä¸Šæ–‡ç« å’Œå®˜æ–¹æ–‡æ¡£éƒ½æ²¡æ‰¾åˆ°è¿™ç©æ„æ€ä¹ˆç”¨ï¼</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">p1 </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.get</span><span style="color:var(--shiki-color-text);">(Name</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">'å¼ ä¸‰'</span><span style="color:var(--shiki-color-text);">)</span></span></code></pre></div>
<p>æˆ–è€…</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">p2 </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Name </span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'æå››'</span><span style="color:var(--shiki-color-text);">)</span></span></code></pre></div>
<p>å½“è·å–çš„ç»“æœä¸å­˜åœ¨æ—¶ï¼ŒæŠ¥ <code>Model.DoesNotExist</code> å¼‚å¸¸ã€‚å¦‚æœæœ‰å¤šæ¡è®°å½•æ»¡è¶³æ¡ä»¶ï¼Œåˆ™è¿”å›ç¬¬ä¸€æ¡ã€‚</p>
<h4 id="2get_or_none"><strong>2ã€get_or_none</strong><a aria-hidden="true" tabindex="-1" href="#2get_or_none" class="internal"> Â§</a></h4>
<p>å¦‚æœå½“è·å–çš„ç»“æœä¸å­˜åœ¨æ—¶ï¼Œä¸æƒ³æŠ¥é”™ï¼Œå¯ä»¥ä½¿ç”¨ <code>Model.get_or_none()</code> æ–¹æ³•ï¼Œä¼šè¿”å› <code>None</code>ï¼Œå‚æ•°å’Œ <code>get</code> æ–¹æ³•ä¸€è‡´ã€‚</p>
<h4 id="3get_by_id"><strong>3ã€get_by_id</strong><a aria-hidden="true" tabindex="-1" href="#3get_by_id" class="internal"> Â§</a></h4>
<p>å¯¹äºä¸»é”®æŸ¥æ‰¾ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¿«æ·æ–¹æ³•<code>Model.get_by_id()</code>ã€‚</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.get_by_id</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)</span></span></code></pre></div>
<h4 id="4get_or_create"><strong>4ã€get_or_create</strong><a aria-hidden="true" tabindex="-1" href="#4get_or_create" class="internal"> Â§</a></h4>
<p><em>Peewee</em> æœ‰ä¸€ä¸ªè¾…åŠ©æ–¹æ³•æ¥æ‰§è¡Œâ€œè·å–/åˆ›å»ºâ€ç±»å‹çš„æ“ä½œï¼š <code>Model.get_or_create()</code> é¦–å…ˆå°è¯•æ£€ç´¢åŒ¹é…çš„è¡Œã€‚å¦‚æœå¤±è´¥ï¼Œå°†åˆ›å»ºä¸€ä¸ªæ–°è¡Œã€‚</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">p</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> created </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.get_or_create</span><span style="color:var(--shiki-color-text);">(Name</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-token-string-expression);">'èµµå…­'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> defaults</span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);">{</span><span style="color:var(--shiki-token-string-expression);">'Age'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">80</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'Birthday'</span><span style="color:var(--shiki-token-keyword);">:</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1940</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)})</span><span style="color:var(--shiki-token-function);">print</span><span style="color:var(--shiki-color-text);">(p</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> created)# </span><span style="color:var(--shiki-token-constant);">SQL</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-function);">è¯­å¥</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'SELECT &quot;t1&quot;.&quot;id&quot;, &quot;t1&quot;.&quot;Name&quot;, &quot;t1&quot;.&quot;Age&quot;, &quot;t1&quot;.&quot;Birthday&quot;, &quot;t1&quot;.&quot;Remarks&quot; FROM &quot;person&quot; AS &quot;t1&quot; WHERE (&quot;t1&quot;.&quot;Name&quot; = ?) LIMIT ? OFFSET ?'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-string-expression);">'èµµå…­'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">0</span><span style="color:var(--shiki-color-text);">])(</span><span style="color:var(--shiki-token-string-expression);">'BEGIN'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> None)(</span><span style="color:var(--shiki-token-string-expression);">'INSERT INTO &quot;person&quot; (&quot;Name&quot;, &quot;Age&quot;, &quot;Birthday&quot;) VALUES (?, ?, ?)'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [</span><span style="color:var(--shiki-token-string-expression);">'èµµå…­'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">80</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">datetime</span><span style="color:var(--shiki-token-function);">.date</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">1940</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">1</span><span style="color:var(--shiki-color-text);">)])</span></span></code></pre></div>
<p><strong>å‚æ•°ï¼š</strong> <code>get_or_create</code> çš„å‚æ•°æ˜¯ <code>**kwargs</code>ï¼Œå…¶ä¸­ defaults ä¸ºéæŸ¥è¯¢æ¡ä»¶çš„å‚æ•°ï¼Œå‰©ä½™çš„ä¸ºå°è¯•æ£€ç´¢åŒ¹é…çš„æ¡ä»¶ï¼Œè¿™ä¸ªçœ‹æ‰§è¡Œæ—¶çš„ SQL è¯­å¥å°±ä¸€ç›®äº†ç„¶äº†ã€‚å¯¹äºâ€œåˆ›å»ºæˆ–è·å–â€ç±»å‹é€»è¾‘ï¼Œé€šå¸¸ä¼šä¾èµ–å”¯ä¸€ çº¦æŸæˆ–ä¸»é”®æ¥é˜²æ­¢åˆ›å»ºé‡å¤å¯¹è±¡ã€‚ä½†è¿™å¹¶ä¸æ˜¯å¼ºåˆ¶çš„ï¼Œæ¯”å¦‚ä¾‹å­ä¸­ï¼Œæˆ‘ä»¥ <code>Name</code> ä¸ºæ¡ä»¶ï¼Œè€Œ <code>Name</code> å¹¶éä¸»é”®ã€‚åªæ˜¯æœ€å¥½ä¸è¦è¿™æ ·åšã€‚</p>
<p><strong>è¿”å›å€¼ï¼š</strong> <code>get_or_create</code> æ–¹æ³•æœ‰ä¸¤ä¸ªè¿”å›å€¼ï¼Œç¬¬ä¸€ä¸ªæ˜¯â€œè·å–/åˆ›å»ºâ€çš„æ¨¡å‹å®ä¾‹ï¼Œç¬¬äºŒä¸ªæ˜¯æ˜¯å¦æ–°åˆ›å»ºã€‚</p>
<h4 id="5select"><strong>5ã€select</strong><a aria-hidden="true" tabindex="-1" href="#5select" class="internal"> Â§</a></h4>
<p>ä½¿ç”¨ <code>Model.select()</code> æŸ¥è¯¢è·å–å¤šæ¡æ•°æ®ã€‚<code>select</code> åå¯ä»¥æ·»åŠ  <code>where</code> æ¡ä»¶ï¼Œå¦‚æœä¸åŠ åˆ™æŸ¥è¯¢æ•´ä¸ªè¡¨ã€‚</p>
<p><strong>è¯­æ³•ï¼š</strong></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-function);">select</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">*</span><span style="color:var(--shiki-color-text);">fields)</span></span></code></pre></div>
<p><strong>å‚æ•°ï¼š</strong></p>
<ul>
<li>fieldsï¼šéœ€è¦æŸ¥è¯¢çš„å­—æ®µï¼Œä¸ä¼ æ—¶è¿”å›æ‰€æœ‰å­—æ®µã€‚ä¼ é€’æ–¹å¼å¦‚ä¸‹ä¾‹æ‰€ç¤ºã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">ps </span><span style="color:var(--shiki-token-keyword);">=</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.select</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Name</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Age)</span><span style="color:var(--shiki-token-function);">.where</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Name </span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'å¼ ä¸‰'</span><span style="color:var(--shiki-color-text);">)</span></span></code></pre></div>
<p><code>select()</code> è¿”å›ç»“æœæ˜¯ä¸€ä¸ª <code>ModelSelect</code> å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯è¿­ä»£ã€ç´¢å¼•ã€åˆ‡ç‰‡ã€‚å½“æŸ¥è¯¢ä¸åˆ°ç»“æœæ—¶ï¼Œä¸æŠ¥é”™ï¼Œè¿”å› <code>None</code>ã€‚å¹¶ä¸” <code>select()</code> ç»“æœæ˜¯å»¶æ—¶è¿”å›çš„ã€‚å¦‚æœæƒ³ç«‹å³æ‰§è¡Œï¼Œå¯ä»¥è°ƒç”¨ <code>execute()</code> æ–¹æ³•ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong><code>where</code> ä¸­çš„æ¡ä»¶ä¸æ”¯æŒ <code>Name='å¼ ä¸‰'</code> è¿™ç§å†™æ³•ï¼Œåªèƒ½æ˜¯ <code>Person.Name == 'å¼ ä¸‰'</code>ã€‚</p>
</blockquote>
<h4 id="6è·å–è®°å½•æ¡æ•°-count-æ–¹æ³•"><strong>6ã€è·å–è®°å½•æ¡æ•° count æ–¹æ³•</strong><a aria-hidden="true" tabindex="-1" href="#6è·å–è®°å½•æ¡æ•°-count-æ–¹æ³•" class="internal"> Â§</a></h4>
<p>ä½¿ç”¨ <code>.count()</code> æ–¹æ³•å¯ä»¥è·å–è®°å½•æ¡æ•°ã€‚</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.select</span><span style="color:var(--shiki-color-text);">()</span><span style="color:var(--shiki-token-function);">.count</span><span style="color:var(--shiki-color-text);">()</span></span></code></pre></div>
<p>ä¹Ÿè®¸ä½ ä¼šé—®ï¼Œç”¨ <code>len()</code> æ–¹æ³•å¯ä»¥å—ï¼Ÿå½“ç„¶ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æ˜¯ä¸€ç§ä¸å¯å–çš„æ–¹æ³•ã€‚</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-function);">len</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.select</span><span style="color:var(--shiki-color-text);">())</span></span></code></pre></div>
<p>è¿™ä¸¤è€…çš„å®ç°æ–¹å¼å¤©å·®åœ°è¿œã€‚ç”¨ <code>count()</code> æ–¹æ³•ï¼Œæ‰§è¡Œçš„ <em>SQL</em> è¯­å¥æ˜¯ï¼š</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'SELECT COUNT(1) FROM (SELECT 1 FROM &quot;person&quot; AS &quot;t1&quot;) AS &quot;_wrapped&quot;'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [])</span></span></code></pre></div>
<p>è€Œç”¨ <code>len()</code> æ–¹æ³•æ‰§è¡Œçš„ <em>SQL</em> è¯­å¥å´æ˜¯ï¼š</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-string-expression);">'SELECT &quot;t1&quot;.&quot;id&quot;, &quot;t1&quot;.&quot;Name&quot;, &quot;t1&quot;.&quot;Age&quot;, &quot;t1&quot;.&quot;Birthday&quot;, &quot;t1&quot;.&quot;Remarks&quot; FROM &quot;person&quot; AS &quot;t1&quot;'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> [])</span></span></code></pre></div>
<p>ç›´æ¥è¿”å›æ‰€æœ‰è®°å½•ç„¶åè·å–é•¿åº¦ï¼Œè¿™ç§æ–¹æ³•æ˜¯éå¸¸ä¸å¯å–çš„ã€‚</p>
<h4 id="7æ’åº-order_by-æ–¹æ³•"><strong>7ã€æ’åº order_by æ–¹æ³•</strong><a aria-hidden="true" tabindex="-1" href="#7æ’åº-order_by-æ–¹æ³•" class="internal"> Â§</a></h4>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.select</span><span style="color:var(--shiki-color-text);">()</span><span style="color:var(--shiki-token-function);">.order_by</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Age)</span></span></code></pre></div>
<p>æ’åºé»˜è®¤æ˜¯å‡åºæ’åˆ—ï¼Œä¹Ÿå¯ä»¥ç”¨ <code>+</code> æˆ– <code>asc()</code> æ¥æ˜ç¡®è¡¨ç¤ºæ˜¯å‡åºæ’åˆ—ï¼š</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.select</span><span style="color:var(--shiki-color-text);">()</span><span style="color:var(--shiki-token-function);">.order_by</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">+</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Age)</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.select</span><span style="color:var(--shiki-color-text);">()</span><span style="color:var(--shiki-token-function);">.order_by</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">Age</span><span style="color:var(--shiki-token-function);">.asc</span><span style="color:var(--shiki-color-text);">())</span></span></code></pre></div>
<p>ç”¨ <code>-</code> æˆ– <code>desc()</code> æ¥è¡¨ç¤ºé™åºï¼š</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.select</span><span style="color:var(--shiki-color-text);">()</span><span style="color:var(--shiki-token-function);">.order_by</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-keyword);">-</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Age)</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.select</span><span style="color:var(--shiki-color-text);">()</span><span style="color:var(--shiki-token-function);">.order_by</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.</span><span style="color:var(--shiki-token-constant);">Age</span><span style="color:var(--shiki-token-function);">.desc</span><span style="color:var(--shiki-color-text);">())</span></span></code></pre></div>
<p>å¦‚è¦å¯¹å¤šä¸ªå­—æ®µè¿›è¡Œæ’åºï¼Œé€—å·åˆ†éš”å†™å°±å¯ä»¥äº†ã€‚</p>
<h3 id="äº”æŸ¥è¯¢æ¡ä»¶"><strong>äº”ã€æŸ¥è¯¢æ¡ä»¶</strong><a aria-hidden="true" tabindex="-1" href="#äº”æŸ¥è¯¢æ¡ä»¶" class="internal"> Â§</a></h3>
<p>å½“æŸ¥è¯¢æ¡ä»¶ä¸æ­¢ä¸€ä¸ªï¼Œéœ€è¦ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦è¿æ¥ï¼Œè€Œ Python ä¸­çš„ <code>and</code>ã€<code>or</code> åœ¨ Peewee ä¸­æ˜¯ä¸æ”¯æŒçš„ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦ä½¿ç”¨ Peewee å°è£…å¥½çš„è¿ç®—ç¬¦ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="../../Rsources/Assets/Pasted-image-20221223130833.png" alt/></p>
<blockquote>
<p><strong>ç‰¹åˆ«æ³¨æ„ï¼š<strong>æœ‰å¤šä¸ªæ¡ä»¶æ—¶ï¼Œæ¯ä¸ªæ¡ä»¶</strong>å¿…é¡»</strong>ç”¨ () æ‹¬èµ·æ¥ã€‚</p>
</blockquote>
<p>å½“æ¡ä»¶å…¨ä¸º <em>and</em> æ—¶ï¼Œä¹Ÿå¯ä»¥ç”¨é€—å·åˆ†éš”ï¼Œ<em>get</em> å’Œ <em>select</em> ä¸­éƒ½å¯ä»¥ï¼š</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.get</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Name </span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'å¼ ä¸‰'</span><span style="color:var(--shiki-token-punctuation);">,</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Age </span><span style="color:var(--shiki-token-keyword);">==</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-constant);">30</span><span style="color:var(--shiki-color-text);">)</span></span></code></pre></div>
<h3 id="å…­æ”¯æŒçš„æ¯”è¾ƒç¬¦"><strong>å…­ã€æ”¯æŒçš„æ¯”è¾ƒç¬¦</strong><a aria-hidden="true" tabindex="-1" href="#å…­æ”¯æŒçš„æ¯”è¾ƒç¬¦" class="internal"> Â§</a></h3>
<p><img src="../../Rsources/Assets/Pasted-image-20221223130845.png" alt/></p>
<blockquote>
<p>æ³¨æ„ï¼šç”±äº SQLite çš„ LIKE æ“ä½œé»˜è®¤æƒ…å†µä¸‹ä¸åŒºåˆ†å¤§å°å†™ï¼Œå› æ­¤ peewee å°†ä½¿ç”¨ SQLite GLOB æ“ä½œè¿›è¡ŒåŒºåˆ†å¤§å°å†™çš„æœç´¢ã€‚glob æ“ä½œä½¿ç”¨æ˜Ÿå·è¡¨ç¤ºé€šé…ç¬¦ï¼Œè€Œä¸æ˜¯é€šå¸¸çš„ç™¾åˆ†å·ã€‚å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ SQLite å¹¶å¸Œæœ›åŒºåˆ†å¤§å°å†™çš„éƒ¨åˆ†å­—ç¬¦ä¸²åŒ¹é…ï¼Œè¯·è®°ä½ä½¿ç”¨æ˜Ÿå·ä½œä¸ºé€šé…ç¬¦ã€‚</p>
</blockquote>
<p>è§£é‡Šä¸€ä¸‹ï¼Œåœ¨ SQLite ä¸­ï¼Œå¦‚æœå¸Œæœ› like çš„æ—¶å€™åŒºåˆ†å¤§å°å†™ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.select</span><span style="color:var(--shiki-color-text);">()</span><span style="color:var(--shiki-token-function);">.where</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Remarks </span><span style="color:var(--shiki-token-keyword);">%</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'a*'</span><span style="color:var(--shiki-color-text);">)</span></span></code></pre></div>
<p>å¦‚æœä¸å¸Œæœ›åŒºåˆ†å¤§å°å†™ï¼Œè¿™ä¹ˆå†™ï¼š</p>
<div data-rehype-pretty-code-fragment><pre style="background-color:var(--shiki-color-background);" tabindex="0" data-language="javascript" data-theme="default"><code data-language="javascript" data-theme="default"><span data-line><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-token-function);">.select</span><span style="color:var(--shiki-color-text);">()</span><span style="color:var(--shiki-token-function);">.where</span><span style="color:var(--shiki-color-text);">(</span><span style="color:var(--shiki-token-constant);">Person</span><span style="color:var(--shiki-color-text);">.Remarks </span><span style="color:var(--shiki-token-keyword);">**</span><span style="color:var(--shiki-color-text);"> </span><span style="color:var(--shiki-token-string-expression);">'a%'</span><span style="color:var(--shiki-color-text);">)</span></span></code></pre></div></article></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1}"></div><svg version="1.1" id="global-graph-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
	s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
	c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
	C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
	c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
	v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
	s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
	C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
	S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
	s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
	s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1}"></div></div></div><div class="backlinks"><h3>Backlinks</h3><ul class="overflow"><li>No backlinks found</li></ul></div></div></div><footer><hr/><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.0.7</a>, Â© 2023</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></body><script type="application/javascript">// quartz/components/scripts/quartz/components/scripts/callout.inline.ts
function toggleCallout() {
  const outerBlock = this.parentElement;
  outerBlock.classList.toggle(`is-collapsed`);
  const collapsed = outerBlock.classList.contains(`is-collapsed`);
  const height = collapsed ? this.scrollHeight : outerBlock.scrollHeight;
  outerBlock.style.maxHeight = height + `px`;
  let current = outerBlock;
  let parent = outerBlock.parentElement;
  while (parent) {
    if (!parent.classList.contains(`callout`)) {
      return;
    }
    const collapsed2 = parent.classList.contains(`is-collapsed`);
    const height2 = collapsed2 ? parent.scrollHeight : parent.scrollHeight + current.scrollHeight;
    parent.style.maxHeight = height2 + `px`;
    current = parent;
    parent = parent.parentElement;
  }
}
function setupCallout() {
  const collapsible = document.getElementsByClassName(
    `callout is-collapsible`
  );
  for (const div of collapsible) {
    const title = div.firstElementChild;
    if (title) {
      title.removeEventListener(`click`, toggleCallout);
      title.addEventListener(`click`, toggleCallout);
      const collapsed = div.classList.contains(`is-collapsed`);
      const height = collapsed ? title.scrollHeight : div.scrollHeight;
      div.style.maxHeight = height + `px`;
    }
  }
}
document.addEventListener(`nav`, setupCallout);
window.addEventListener(`resize`, setupCallout);
</script><script type="module">
          import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
          const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
          mermaid.initialize({ 
            startOnLoad: false,
            securityLevel: 'loose',
            theme: darkMode ? 'dark' : 'default'
          });
          document.addEventListener('nav', async () => {
            await mermaid.run({
              querySelector: '.mermaid'
            })
          });
          </script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script type="application/javascript">
          const socket = new WebSocket('ws://localhost:3001')
          socket.addEventListener('message', () => document.location.reload())
        </script><script src="../../postscript.js" type="module"></script></html>